@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import '../styles/modern-dark.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* --- Light theme (fallback) --- */
    --background: 0 0% 100%;
    --foreground: 218 22% 18%; /* #212529 */
    --card: 0 0% 100%;
    --card-foreground: 218 22% 18%;
    --popover: 0 0% 100%;
    --popover-foreground: 218 22% 18%;
    --primary: 211 100% 47%; /* #007BFF */
    --primary-foreground: 0 0% 100%;
    --secondary: 210 16% 96%;
    --secondary-foreground: 218 22% 18%;
    --muted: 210 16% 94%;
    --muted-foreground: 215 15% 45%;
    --accent: 45 96% 56%; /* #FFD700 for focus states */
    --accent-foreground: 0 0% 10%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;
    --border: 210 16% 85%;
    --input: 210 16% 90%;
    --ring: 211 100% 47%;
    --radius: 0.75rem;

    /* Surface scale (supports 60-30-10 rule) */
    --surface-0: 0 0% 100%;
    --surface-1: 210 20% 97%;
    --surface-2: 210 16% 92%;

    /* Status colors */
    --success: 142 65% 38%;
    --success-foreground: 0 0% 100%;
    --info: 210 80% 45%;
    --info-foreground: 0 0% 100%;
    --warning: 45 96% 56%;
    --warning-foreground: 0 0% 10%;

    /* Sidebar palette */
    --sidebar-background: 0 0% 99%;
    --sidebar-foreground: 218 22% 18%;
    --sidebar-primary: 211 100% 47%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 16% 96%;
    --sidebar-accent-foreground: 218 22% 18%;
    --sidebar-border: 210 16% 90%;
    --sidebar-ring: 211 100% 47%;

    /* Typography scale */
    --step--2: clamp(0.7rem, 0.68rem + 0.12vw, 0.78rem);
    --step--1: clamp(0.78rem, 0.74rem + 0.2vw, 0.9rem);
    --step-0: clamp(0.95rem, 0.9rem + 0.25vw, 1.05rem);
    --step-1: clamp(1.05rem, 1rem + 0.35vw, 1.25rem);
    --step-2: clamp(1.25rem, 1.15rem + 0.45vw, 1.5rem);
    --step-3: clamp(1.4rem, 1.25rem + 0.55vw, 1.8rem);
    --step-4: clamp(1.6rem, 1.35rem + 0.7vw, 2.2rem);
    --step-5: clamp(1.85rem, 1.65rem + 0.9vw, 2.6rem);
    --step-6: clamp(2.1rem, 1.85rem + 1.1vw, 3rem);

    /* Spacing scale */
    --space-xs: clamp(0.25rem, 0.22rem + 0.1vw, 0.4rem);
    --space-sm: clamp(0.5rem, 0.45rem + 0.15vw, 0.7rem);
    --space-md: clamp(0.9rem, 0.8rem + 0.2vw, 1.1rem);
    --space-lg: clamp(1.2rem, 1rem + 0.35vw, 1.6rem);
    --space-xl: clamp(1.6rem, 1.3rem + 0.5vw, 2rem);
    --space-2xl: clamp(2rem, 1.7rem + 0.6vw, 2.6rem);
    --space-3xl: clamp(2.6rem, 2.1rem + 0.8vw, 3.2rem);

    /* Container widths */
    --container-xs: clamp(16rem, 90vw, 22rem);
    --container-sm: clamp(22rem, 90vw, 32rem);
    --container-md: clamp(32rem, 90vw, 48rem);
    --container-lg: clamp(48rem, 88vw, 64rem);
    --container-xl: clamp(64rem, 88vw, 78rem);
    --container-2xl: clamp(78rem, 88vw, 96rem);

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(17, 17, 17, 0.08);
    --shadow-md: 0 8px 20px rgba(17, 17, 17, 0.12);
    --shadow-lg: 0 18px 40px rgba(17, 17, 17, 0.16);

    /* Loading indicators */
    --loading-bg: #f8f9fa;
    --loading-text: #212529;
    --loading-accent: #ffd700;
    --loading-primary: #007bff;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      color-scheme: dark;
      --background: 0 0% 0%;
      --foreground: 0 0% 93%;
      --card: 0 0% 6%;
      --card-foreground: 0 0% 96%;
      --popover: 0 0% 4%;
      --popover-foreground: 0 0% 96%;
      --primary: 51 100% 50%;
      --primary-foreground: 0 0% 0%;
      --secondary: 0 0% 12%;
      --secondary-foreground: 0 0% 90%;
      --muted: 0 0% 16%;
      --muted-foreground: 0 0% 70%;
      --accent: 51 100% 50%;
      --accent-foreground: 0 0% 10%;
      --destructive: 0 73% 48%;
      --destructive-foreground: 0 0% 98%;
      --border: 0 0% 20%;
      --input: 0 0% 14%;
      --ring: 51 100% 50%;

      --surface-0: 0 0% 0%;
      --surface-1: 0 0% 8%;
      --surface-2: 0 0% 14%;

      --success: 142 72% 40%;
      --success-foreground: 0 0% 100%;
      --info: 210 90% 56%;
      --info-foreground: 0 0% 0%;
      --warning: 51 100% 50%;
      --warning-foreground: 0 0% 10%;

      --sidebar-background: 0 0% 4%;
      --sidebar-foreground: 0 0% 92%;
      --sidebar-primary: 51 100% 50%;
      --sidebar-primary-foreground: 0 0% 8%;
      --sidebar-accent: 0 0% 10%;
      --sidebar-accent-foreground: 0 0% 92%;
      --sidebar-border: 0 0% 18%;
      --sidebar-ring: 51 100% 50%;

      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.45);
      --shadow-md: 0 12px 30px rgba(0, 0, 0, 0.45);
      --shadow-lg: 0 24px 45px rgba(0, 0, 0, 0.55);

      --loading-bg: #050505;
      --loading-text: #f5f5f5;
      --loading-accent: #ffd700;
      --loading-primary: #ffd700;
    }
  }

  .dark {
    color-scheme: dark;
    --background: 0 0% 0%;
    --foreground: 0 0% 93%;
    --card: 0 0% 6%;
    --card-foreground: 0 0% 96%;
    --popover: 0 0% 4%;
    --popover-foreground: 0 0% 96%;
    --primary: 51 100% 50%;
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 90%;
    --muted: 0 0% 16%;
    --muted-foreground: 0 0% 70%;
    --accent: 51 100% 50%;
    --accent-foreground: 0 0% 10%;
    --destructive: 0 73% 48%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 20%;
    --input: 0 0% 14%;
    --ring: 51 100% 50%;

    --surface-0: 0 0% 0%;
    --surface-1: 0 0% 8%;
    --surface-2: 0 0% 14%;

    --sidebar-background: 0 0% 4%;
    --sidebar-foreground: 0 0% 92%;
    --sidebar-primary: 51 100% 50%;
    --sidebar-primary-foreground: 0 0% 8%;
    --sidebar-accent: 0 0% 10%;
    --sidebar-accent-foreground: 0 0% 92%;
    --sidebar-border: 0 0% 18%;
    --sidebar-ring: 51 100% 50%;

    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.45);
    --shadow-md: 0 12px 30px rgba(0, 0, 0, 0.45);
    --shadow-lg: 0 24px 45px rgba(0, 0, 0, 0.55);
  }

  *, *::before, *::after {
    border-color: hsl(var(--border));
  }

  body {
    @apply bg-background text-foreground antialiased;
    background-color: light-dark(#ffffff, #000000);
    color: light-dark(#212529, #f5f5f5);
    font-family: var(--font-inter), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-size: 1rem;
    line-height: 1.5;
    min-height: 100vh;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  main {
    background-color: hsl(var(--background));
  }

  a {
    color: hsl(var(--primary));
    transition: color 0.3s ease;
  }

  a:hover {
    color: hsl(var(--accent));
  }

  button,
  input,
  select,
  textarea {
    font: inherit;
    color: inherit;
  }

  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer utilities {
  .bg-surface-0 {
    background-color: hsl(var(--surface-0));
  }

  .bg-surface-1 {
    background-color: hsl(var(--surface-1));
  }

  .bg-surface-2 {
    background-color: hsl(var(--surface-2));
  }

  .text-subtle {
    color: hsl(var(--muted-foreground));
  }

  .shadow-soft {
    box-shadow: var(--shadow-md);
  }

  .shadow-elevated {
    box-shadow: var(--shadow-lg);
  }

  .border-subtle {
    border-color: hsl(var(--border));
  }

  .transition-theme {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease,
      box-shadow 0.3s ease;
  }
}
