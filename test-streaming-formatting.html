<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Formata√ß√£o e Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Simular o indicador de streaming */
        .streaming-indicator {
            position: relative;
        }
        
        .streaming-indicator::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3498db, transparent);
            animation: streamFlow 2s infinite;
        }
        
        @keyframes streamFlow {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        /* Simular o indicador de cursor piscando */
        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background-color: #3498db;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Simular formata√ß√£o markdown */
        .prose h1 { font-size: 1.5rem; font-weight: bold; margin: 1rem 0; }
        .prose h2 { font-size: 1.25rem; font-weight: bold; margin: 0.75rem 0; }
        .prose h3 { font-size: 1.125rem; font-weight: bold; margin: 0.5rem 0; }
        .prose p { margin: 0.5rem 0; line-height: 1.6; }
        .prose strong { font-weight: bold; }
        .prose em { font-style: italic; }
        .prose code { background: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-family: monospace; }
        .prose ul { list-style-type: disc; margin: 0.5rem 0; padding-left: 1.5rem; }
        .prose ol { list-style-type: decimal; margin: 0.5rem 0; padding-left: 1.5rem; }
        .prose li { margin: 0.25rem 0; }
    </style>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-8">Teste de Formata√ß√£o e Streaming</h1>
        
        <!-- Mensagem do usu√°rio -->
        <div class="flex items-start gap-3 mb-6 justify-end">
            <div class="bg-amber-300 text-black rounded-2xl px-4 py-3 shadow-sm max-w-prose md:max-w-[65ch] break-words hyphens-auto">
                <div>Me ajude com: Quero tirar uma d√∫vida de geometria</div>
                <div class="mt-1 text-xs text-zinc-500 select-none">16:55</div>
            </div>
        </div>
        
        <!-- Mensagem do assistente COM STREAMING -->
        <div class="flex items-start gap-3 mb-6 justify-start">
            <div class="flex flex-col items-center">
                <div class="w-8 h-8 rounded-full border-2 shadow-sm flex items-center justify-center bg-blue-600 text-white">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                </div>
            </div>
            <div class="flex-1">
                <article class="self-start rounded-2xl px-4 py-3 shadow-sm border border-zinc-200/60 bg-white/70 max-w-prose md:max-w-[65ch] break-words hyphens-auto">
                    <div class="message-content">
                        <!-- ProfessorAnswer -->
                        <div class="professor-answer">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                <h3 class="text-lg font-semibold text-blue-900">Professor IA</h3>
                                <p class="text-sm text-blue-700">Assistente de estudos</p>
                            </div>
                            
                            <div class="professor-content">
                                <div class="prose prose-sm max-w-none">
                                    <p>Claro! üòä Estou aqui para ajudar. Qual √© a sua d√∫vida sobre geometria?</p>
                                    <p>Voc√™ pode me dar mais detalhes, como:</p>
                                    <ul>
                                        <li>O tipo de figura</li>
                                        <li>O conceito que voc√™ est√° tentando entender</li>
                                        <li>Se √© sobre <strong>√°rea</strong>, <strong>per√≠metro</strong> ou <em>outro t√≥pico</em></li>
                                    </ul>
                                    <p>Vamos juntos resolver isso! üèóÔ∏èüìê</p>
                                    
                                    <!-- Simular streaming em progresso -->
                                    <span class="typing-cursor"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-1 text-xs text-zinc-500 select-none">16:55 ‚Ä¢ 0 tokens</div>
                </article>
            </div>
        </div>
        
        <!-- Mensagem do assistente SEM STREAMING (completa) -->
        <div class="flex items-start gap-3 mb-6 justify-start">
            <div class="flex flex-col items-center">
                <div class="w-8 h-8 rounded-full border-2 shadow-sm flex items-center justify-center bg-blue-600 text-white">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                </div>
            </div>
            <div class="flex-1">
                <article class="self-start rounded-2xl px-4 py-3 shadow-sm border border-zinc-200/60 bg-white/70 max-w-prose md:max-w-[65ch] break-words hyphens-auto">
                    <div class="message-content">
                        <!-- ProfessorAnswer -->
                        <div class="professor-answer">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                <h3 class="text-lg font-semibold text-blue-900">Professor IA</h3>
                                <p class="text-sm text-blue-700">Assistente de estudos</p>
                            </div>
                            
                            <div class="professor-content">
                                <div class="prose prose-sm max-w-none">
                                    <p>Perfeito! Vou te ajudar com trigonometria. Aqui est√£o os conceitos b√°sicos:</p>
                                    
                                    <h3>Fun√ß√µes Trigonom√©tricas Principais:</h3>
                                    <ul>
                                        <li><strong>Sen (Œ∏)</strong> = cateto oposto / hipotenusa</li>
                                        <li><strong>Cos (Œ∏)</strong> = cateto adjacente / hipotenusa</li>
                                        <li><strong>Tan (Œ∏)</strong> = cateto oposto / cateto adjacente</li>
                                    </ul>
                                    
                                    <h3>Exemplo Pr√°tico:</h3>
                                    <p>Em um tri√¢ngulo ret√¢ngulo com hipotenusa = 5 e cateto oposto = 3:</p>
                                    <ul>
                                        <li>Sen (Œ∏) = 3/5 = 0.6</li>
                                        <li>Cos (Œ∏) = 4/5 = 0.8</li>
                                        <li>Tan (Œ∏) = 3/4 = 0.75</li>
                                    </ul>
                                    
                                    <p>Precisa de mais detalhes sobre algum conceito espec√≠fico? üìê</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-1 text-xs text-zinc-500 select-none">16:56 ‚Ä¢ 150 tokens</div>
                </article>
            </div>
        </div>
        
        <!-- Compara√ß√£o -->
        <div class="mt-12 p-6 bg-green-50 border border-green-200 rounded-lg">
            <h2 class="text-lg font-semibold text-green-900 mb-4">Como deveria funcionar:</h2>
            <ul class="text-green-800 space-y-2">
                <li>‚úÖ <strong>Formata√ß√£o Markdown</strong>: T√≠tulos, listas, negrito, it√°lico</li>
                <li>‚úÖ <strong>ProfessorAnswer</strong>: Cabe√ßalho azul com "Professor IA"</li>
                <li>‚úÖ <strong>Streaming</strong>: Cursor piscando durante o carregamento</li>
                <li>‚úÖ <strong>Layout</strong>: Bolhas com bordas arredondadas e sombras</li>
                <li>‚úÖ <strong>Metadados</strong>: Timestamp e tokens na parte inferior</li>
            </ul>
        </div>
        
        <!-- Problemas identificados -->
        <div class="mt-6 p-6 bg-red-50 border border-red-200 rounded-lg">
            <h2 class="text-lg font-semibold text-red-900 mb-4">Problemas corrigidos:</h2>
            <ul class="text-red-800 space-y-2">
                <li>üîß <strong>StreamingMessage</strong>: Restaurado par√¢metro isStreaming</li>
                <li>üîß <strong>MarkdownRenderer</strong>: Adicionado indicador de streaming</li>
                <li>üîß <strong>Classes CSS</strong>: Substitu√≠do classes inexistentes por Tailwind</li>
                <li>üîß <strong>L√≥gica de m√≥dulo</strong>: Simplificada para usar currentModuleId</li>
            </ul>
        </div>
    </div>
</body>
</html>
